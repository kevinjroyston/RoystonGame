<div class="drawb">
    <!-- Drawing Canvas -->
    <div class="drawb-canvas">
        <canvas appDrawing class="draw-canvas" [width]="drawingWidth" [height]="drawingHeight" [ngStyle]="{'background-image': 'url(' + drawingOptions.canvasBackground + ')'}" [premadeDrawing]="drawingOptions.premadeDrawing" [lineColor]="selectedColor" [lineWidth]="selectedBrushSize"
            [eraserMode]="eraserMode" (drawingEmitter)="onDrawingChange($event)">
        </canvas>
    </div>

    <!-- Drawing Settings -->
    <div class="drawb-settings">

        <div class="drawb-setting" *ngIf="showEraser">
            <div class="drawb-setting-header">
                Tools
            </div>
            <div class="drawb-tools">
                <scrawlbrawl-iconbutton (click)="eraserMode=false" [active]="!eraserMode">
                    <ion-icon name="brush-outline"></ion-icon>
                </scrawlbrawl-iconbutton>

                <scrawlbrawl-iconbutton (click)="eraserMode=true" [active]="eraserMode">
                    <eraser-svg></eraser-svg>
                </scrawlbrawl-iconbutton>
            </div>
        </div>

        <div class="drawb-setting">
            <div class="drawb-setting-header">
                Actions
            </div>
            <div class="drawb-actions">
                <scrawlbrawl-iconbutton (click)="drawingDirective.onPerformUndo()">
                    <ion-icon name="arrow-back-outline"></ion-icon>
                </scrawlbrawl-iconbutton>

                <scrawlbrawl-iconbutton *ngIf="drawingOptions.galleryOptions" (click)="showGallery=!showGallery">
                    <ion-icon name="star-outline"></ion-icon>
                </scrawlbrawl-iconbutton>
            </div>
        </div>

        <div class="drawb-setting" *ngIf="showBrushSizeSelector">
            <div class="drawb-setting-header">
                Size
            </div>
            <div id="size-controller">
                <input type="range" min="3" max="45" [value]="selectedBrushSize" [(ngModel)]="selectedBrushSize">
                <div id="preview-size-wrapper">
                    <div id="preview-size" [ngStyle]="{'height': selectedBrushSize * 1.3 + 'px', 'width': selectedBrushSize * 1.3 + 'px', 'backgroundColor': selectedColor}"></div>
                </div>
            </div>
        </div>

        <div class="drawb-setting" *ngIf="showColorSelector && ((!drawingOptions.colorList) || (drawingOptions.colorList.length==0))">
            <div class="drawb-setting-header">
                Color
            </div>
            <div class='drawb-colors'>
                <div class="color-input" (click)='openColorPicker($event)' [ngStyle]="{ 'background-color': selectedColor}">
                </div>
            </div>
        </div>

        <div *ngIf="showColorSelector && drawingOptions.colorList && drawingOptions.colorList.length> 1">
            <mat-radio-group class="color-picker-group" [(ngModel)]="selectedColor" (change)="eraserMode=false">
                <div class="color-picker-dot" *ngFor="let colorChoice of drawingOptions.colorList; let i = index" [ngStyle]="{'background-color': colorChoice}">
                    <mat-radio-button [value]="colorChoice" [checked]="i==0"></mat-radio-button>
                </div>
            </mat-radio-group>
        </div>
        <div #galleryPanel [hidden]="!showGallery" class="drawb-setting" *ngIf="drawingOptions.galleryOptions">
            <div class="drawb-setting-header">
                Gallery
            </div>
            <div>
                <gallerytool #galleryTool [drawingOptions]="drawingOptions" [galleryEditor]="galleryEditor" [drawingDirective]="drawingDirective"></gallerytool>
            </div>
        </div>