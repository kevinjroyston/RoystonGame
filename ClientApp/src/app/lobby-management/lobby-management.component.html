<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Manage Lobby</title>
  </head>

  <body>

    <div *ngIf="lobby == null">
      <button (click)="onCreateLobby()">Create Lobby</button>
    </div>

    <div *ngIf="lobby != null">
      <div class="row justify-content-around align-items-center p-2 border-bottom">
        <div class="d-inline-flex">Lobby ID: {{ lobby.lobbyId.toUpperCase() }}</div>
        <div class="d-inline-flex">Players Joined: {{ lobby.playerCount }}</div>
        <button type="button" class="btn btn-sm btn-outline-secondary" (click)="onDeleteLobby()">Delete Lobby</button>
      </div>

      <div *ngIf="!lobby.gameInProgress" class="p-1">
        <div>
          <button class="btn btn-primary" (click)="gameModeCollapse = !gameModeCollapse" [attr.aria-expanded]="!gameModeCollapse" aria-controls="gameModes">
            Select a game mode
          </button>
          <div id="gameModes" [ngbCollapse]="gameModeCollapse">
            <ul>
              <div *ngFor="let gameMode of gameModes; let i = index">
                <li (click)="onSelectGameMode(i)">{{ gameMode.title }}</li>
              </div>
            </ul>
          </div>
        </div>

        <div *ngIf="lobby.selectedGameMode != null && gameModes != null">
          <p>Selected game mode: {{ gameModes[lobby.selectedGameMode].title }}</p>

            <div *ngFor="let option of gameModes[lobby.selectedGameMode].options; let i = index">
              <div *ngIf="option.responseType === 'Integer'">
                <label>{{ option.description }}</label>
                <input type="number" name="value{{i}}" [(ngModel)]="option.value" />
              </div>
              <div *ngIf="option.responseType === 'Boolean'">
                <label>{{ option.description }}</label>
                <ui-switch name="value{{i}}" [(ngModel)]="option.value"></ui-switch>
                <label>Current value: {{ option.value }}</label>
              </div>
            </div>
            <div class="Error" *ngIf="error">{{ error }}</div>
          <button class="btn btn-primary" (click)="onStartLobby()">Start</button>
        </div>
      </div>

    </div>
    
  </body>
</html>
